find . -type f -name "*.mp4" -print0 | while IFS= read -r -d '' video; do
    # Extract the filename without the extension
    filename="${video%.*}"
    # Run ffmpeg command to generate the 5th frame as a .jpg, overwriting if the .jpg exists
    ffmpeg -y -i "$video" -vf "select=eq(n\,4)" -q:v 3 -frames:v 1 "${filename}.jpg"
    # Check if ffmpeg was successful and print a message
    if [ $? -eq 0 ]; then
        echo "Processed: $video"
    else
        echo "Failed to process: $video"
    fi
done